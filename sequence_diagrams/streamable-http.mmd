sequenceDiagram
    participant C as ğŸ–¥ï¸ Client
    participant S as ğŸ“¡ Server
    participant AI as ğŸ¤– GenAI Model

    Note over C, AI: ğŸ” Server Health Check
    C->>+S: GET /health
    S-->>-C: âœ… 200 OK<br/>ğŸ©º status, streaming info
    
    Note over C, AI: ğŸ†• Session Creation
    C->>+S: POST /sessions/new
    S-->>-C: âœ… 200 OK<br/>ğŸ”‘ session_id
    
    Note over C, AI: ğŸ“¡ HTTP Chunked Stream Chat
    rect rgb(240, 248, 255)
        C->>+S: POST /chat/stream<br/>ğŸ“ {message, session_id}<br/>ğŸ”— Accept: application/x-ndjson
        Note over S: ğŸ”„ Start chunked transfer encoding
        
        S-->>C: ğŸ“¦ HTTP Chunk: session_info<br/>ğŸ”‘ {session_id, model} + \n
        
        S-->>C: ğŸ“¦ HTTP Chunk: status<br/>ğŸ’­ "Generating response..." + \n
        
        S->>+AI: generate_response<br/>ğŸ§  message + history
        
        loop ğŸ“¡ Real-time HTTP Chunks
            AI-->>S: ğŸ“ response chunk
            S-->>C: ğŸ“¦ HTTP Chunk: chunk<br/>âœ¨ {text, chunk_number} + \n
            Note over C: ğŸ–¨ï¸ Parse NDJSON and display
        end
        
        AI-->>-S: ğŸ response complete
        S-->>C: ğŸ“¦ HTTP Chunk: complete<br/>âœ… {total_chunks, processing_time} + \n
        S-->>-C: ğŸ”š End chunked response
    end
    
    Note over C, AI: ğŸ“Š Session Management
    C->>+S: GET /sessions/{session_id}
    S-->>-C: âœ… 200 OK<br/>ğŸ“‹ session info
    
    C->>+S: DELETE /sessions/{session_id}
    S-->>-C: âœ… 200 OK<br/>ğŸ—‘ï¸ deleted